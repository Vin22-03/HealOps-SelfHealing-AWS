{% extends "layout.html" %}
{% block title %}HealOps | Incidents{% endblock %}

{% block content %}
<section class="hero">
  <h1 class="h1">Incident History</h1>
  <p class="subtitle">
    Each incident documents: <b>what broke</b>, <b>how it was detected</b>, <b>what healed it</b>, and <b>what we learned</b>.
    That’s how reliability work is communicated in real teams.
  </p>

  <!-- ✅ ADDED: DynamoDB truth note -->
  <div class="glass callout">
    <b>Credibility Rule:</b> This page mirrors <b>DynamoDB</b>. No mock JSON. No UI assumptions.
  </div>

  <div class="glass" style="margin-top:14px">
    <table class="table" id="incTable">
      <thead>
        <tr>
          <th>Time</th>
          <th>Component / Cluster</th>
          <th>Incident</th>
          <th>Detected By</th>
          <th>Healing</th>
          <th>MTTR</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS builds rows + expandable details -->
      </tbody>
    </table>
  </div>

  <!-- ✅ MTTR note -->
  <p class="muted" style="margin-top:10px">
    MTTR is computed only when a recovery signal is observed and stored in DynamoDB (source of truth).
  </p>
</section>

<section class="section">
  <div class="glass callout">
    <h3 class="h3">How to read this page</h3>
    <ul class="list">
      <li><b>Desired/Running</b> shows task counts <b>before → after</b> healing (only present for autoscaling incidents).</li>
      <li><b>Scale Δ</b> comes directly from DynamoDB (no UI math).</li>
      <li>Click any row to expand and see the full DynamoDB-backed evidence.</li>
    </ul>
  </div>
</section>
<script>
  window.HEALOPS_PAGE = "incidents";
</script>
{% endblock %}
